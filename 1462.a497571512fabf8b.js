"use strict";(self.webpackChunkngrid_docs_app=self.webpackChunkngrid_docs_app||[]).push([[1462],{21462:(I,w,s)=>{s.d(w,{Lu:()=>a}),s(45811);var m=s(28027),b=s(36895),v=s(3805),d=s(14625),S=s(73375),A=s(54131),O=s(65590),n=s(29552),o=s(26517),i=s(94650);class a{constructor(h){d.q5.onCreatedSafe(a,(f,g)=>{const p=h.get(m.dm);p&&!0===p.autoEnable&&g.onInit().subscribe(()=>{if(!g.hasPlugin(m.dm)){const r=g.createPlugin(m.dm);p.autoEnableOptions&&(r.loadOptions=p.autoEnableOptions.loadOptions,r.saveOptions=p.autoEnableOptions.saveOptions)}})})}}a.NGRID_PLUGIN=(0,d.Ic)({id:m.dm,factory:"create",runOnce:function u(){(0,S.R)(),(0,o.l)(),function t(){n.$2.registerRootChunkSection("columnVisibility",{sourceMatcher:l=>l.grid.columnApi,stateMatcher:l=>(l.columnVisibility||(l.columnVisibility=[]),l)}),(0,O.O)("columnVisibility").handleKeys("columnVisibility").serialize((l,h)=>h.source.hiddenColumnIds).deserialize((l,h,f)=>{f.extApi.columnStore.updateColumnVisibility(h)}).register()}(),(0,A.f)()}},m.Bg),a.\u0275fac=function(h){return new(h||a)(i.LFG(v.f8))},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[b.ez,d.dC]})},26517:(I,w,s)=>{s.d(w,{l:()=>O});var k=s(14625),m=s(65590),b=s(29552);function d(n,t,o){const u=[];for(const i of o){const a={};t.runChildChunk(n,a,i),u.push(a)}return u}function S(n,t,o){const{columnStore:u}=o.extApi,{table:i}=o.source;for(const a of["header","footer"]){const l="s"===n?i:t,h=l===i?t:i;if(l[a]){const f="header"===a?u.headerColumnDef:u.footerColumnDef;h[a]||(h[a]={}),o.runChildChunk("dataMetaRow",t[a],i[a],{kind:a,active:f})}}}function A(n,t,o){const{table:u}=o.source,i="s"===n?u:t,a=i===t?l=>({colState:l,pblColumn:u.cols.find(h=>k.P6.isPblColumn(h)&&h.orgProp===l.prop||h.id===l.id||h.prop===l.prop)}):l=>({colState:t.cols[t.cols.push({})-1],pblColumn:k.P6.isPblColumn(l)&&l});if(i.cols&&i.cols.length>0)for(const l of i.cols){const{colState:h,pblColumn:f}=a(l),g={pblColumn:k.P6.isPblColumn(f)&&f,activeColumn:o.grid.columnApi.findColumn(l.id||l.prop)};o.runChildChunk("dataColumn",h,f,g)}}function O(){b.$2.registerRootChunkSection("columns",{sourceMatcher:n=>n.grid.columns,stateMatcher:n=>n.columns||(n.columns={table:{cols:[]},header:[],footer:[],headerGroup:[]})}),(0,m.O)("columns").handleKeys("table","header","headerGroup","footer").serialize((n,t)=>{switch(n){case"table":const o={cols:[]};return S("s",o,t),A("s",o,t),o;case"header":case"footer":const u=t.source[n];if(u&&u.length>0){const a=[];for(const l of u){const h={};t.runChildChunk("metaRow",h,l),h.cols=d("metaColumn",t,l.cols),a.push(h)}return a}break;case"headerGroup":const i=t.source.headerGroup;if(i&&i.length>0){const a=[];for(const l of i){const h={};t.runChildChunk("metaGroupRow",h,l),h.cols=d("metaColumn",t,l.cols),a.push(h)}return a}}}).deserialize((n,t,o)=>{switch(n){case"table":const u=t;S("d",u,o),A("d",u,o);break;case"header":case"footer":const i=o.source[n],a=t;if(a&&a.length>0)for(const l of a){const h=i.find(f=>f.rowIndex===l.rowIndex);if(h){o.runChildChunk("metaRow",l,h);for(const f of l.cols){const g=h.cols.find(p=>p.id===f.id);g&&(o.extApi.columnStore.find(f.id),o.runChildChunk("metaColumn",f,g))}}}}}).register(),function v(){(0,m.O)("dataColumn").requiredKeys("id","prop").handleKeys("label","css","type","width","minWidth","maxWidth","headerType","footerType","sort","alias","editable","pin").serialize((n,t)=>{const o=t.data.activeColumn||t.data.pblColumn;if(o&&"prop"===n)return o.orgProp;const u=o?o[n]:t.source[n];return"sort"===n?"boolean"==typeof u?u:void 0:u}).deserialize((n,t,o)=>{const{activeColumn:u}=o.data;if(u&&"width"===n&&u.updateWidth(t),o.source){switch(n){case"prop":return;case"type":case"headerType":case"footerType":const i=o.source[n],a=t;if(a&&"string"!=typeof a&&i&&"string"!=typeof i)return i.name=a.name,void(a.data&&(i.data=Object.assign(i.data||{},a.data)))}o.source[n]=t}}).register(),(0,m.O)("dataMetaRow").handleKeys("rowClassName","type").serialize((n,t)=>{const o=t.data.active||t.source;if(o)return o[n]}).deserialize((n,t,o)=>{o.source[n]=t}).register(),(0,m.O)("metaRow").handleKeys("rowClassName","type","rowIndex").serialize((n,t)=>t.source[n]).deserialize((n,t,o)=>{}).register(),(0,m.O)("metaGroupRow").handleKeys("rowClassName","type","rowIndex").serialize((n,t)=>t.source[n]).deserialize((n,t,o)=>{}).register(),(0,m.O)("metaColumn").requiredKeys("kind","rowIndex").handleKeys("id","label","css","type","width","minWidth","maxWidth").serialize((n,t)=>t.source[n]).deserialize((n,t,o)=>{}).register(),(0,m.O)("metaGroupColumn").requiredKeys("columnIds","rowIndex").handleKeys("id","label","css","type","width","minWidth","maxWidth").serialize((n,t)=>t.source[n]).deserialize((n,t,o)=>{}).register()}()}},54131:(I,w,s)=>{s.d(w,{f:()=>b});var k=s(65590),m=s(29552);function b(){m.$2.registerRootChunkSection("columnOrder",{sourceMatcher:v=>v.grid.columnApi,stateMatcher:v=>(v.columnOrder||(v.columnOrder=[]),v)}),(0,k.O)("columnOrder").handleKeys("columnOrder").serialize((v,d)=>d.source.visibleColumnIds.slice()).deserialize((v,d,S)=>{const{grid:O}=S;let n;if(d?.length===O.columnApi.visibleColumns.length)for(let t=0,o=d.length;t<o;t++){const u=O.columnApi.visibleColumns[t];if(d[t]!==u.id){const i=O.columnApi.findColumn(d[t]);if(!i)return;n=[i,u],O.columnApi.moveColumn(i,u)}}n&&(O.columnApi.moveColumn(n[1],n[0]),O.columnApi.moveColumn(n[0],n[1]))}).register()}},73375:(I,w,s)=>{s.d(w,{R:()=>b});var k=s(65590),m=s(29552);function b(){m.$2.registerRootChunkSection("grid",{sourceMatcher:v=>v.grid,stateMatcher:v=>v.grid||(v.grid={})}),(0,k.O)("grid").handleKeys("showHeader","showFooter","focusMode","usePagination","minDataViewHeight").serialize((v,d)=>d.source[v]).deserialize((v,d,S)=>{S.source[v]=d}).register()}},65590:(I,w,s)=>{s.d(w,{O:()=>b});var k=s(29552);class m{constructor(d){this.chunkId=d,this.keys=new Set,this.rKeys=new Set}handleKeys(...d){for(const S of d)this.keys.add(S);return this}requiredKeys(...d){for(const S of d)this.keys.add(S),this.rKeys.add(S);return this}serialize(d){return this.sFn=d,this}deserialize(d){return this.dFn=d,this}register(){0!==this.keys.size&&(!this.sFn||!this.dFn||k.$2.registerChunkHandlerDefinition({chunkId:this.chunkId,keys:Array.from(this.keys.values()),rKeys:Array.from(this.rKeys.values()),serialize:this.sFn,deserialize:this.dFn}))}}function b(v){return new m(v)}},45811:(I,w,s)=>{s.d(w,{nM:()=>a,jw:()=>h,zL:()=>l});var k=s(29552),b=(s(65590),s(14625));let v=(()=>{class r{save(c,y){try{const C=this.loadGlobalStateStore();return C[c]=y,y.__metadata__||(y.__metadata__={}),y.__metadata__.updatedAt=(new Date).toISOString(),this.saveGlobalStateStore(C),Promise.resolve()}catch(C){return Promise.reject(C)}}load(c){return Promise.resolve(this.loadGlobalStateStore()[c]||{})}exists(c){const y=this.loadGlobalStateStore()||{};return Promise.resolve(c in y)}loadGlobalStateStore(){const c=localStorage.getItem(r.globalStateKey);return c?JSON.parse(c):{}}saveGlobalStateStore(c){localStorage.setItem(r.globalStateKey,JSON.stringify(c))}}return r.globalStateKey="pebulaNgridState",r})();class d{resolveId(e){return e.grid.id}}function S(r,e){return e.identResolver.resolveId(o(r,e))}function A(r,e,c){const y=i(r.chunkId,c.options);for(const C of r.keys)(!y||r.rKeys.indexOf(C)>-1||y(C))&&(e[C]=r.serialize(C,c))}function O(r,e,c){const y=i(r.chunkId,c.options);for(const C of r.keys)C in e&&(!y||r.rKeys.indexOf(C)>-1||y(C))&&r.deserialize(C,e[C],c)}function n(r,e){if(e||(e={}),e.persistenceAdapter||(e.persistenceAdapter=new v),e.identResolver||(e.identResolver=new d),"load"===r){const c=e;c.strategy||(c.strategy="overwrite")}return e}function t(r){const e=b.q5.find(r);if(e)return e.extApi}function o(r,e){return{grid:r,extApi:t(r),options:e}}function u(r,e,c){return{...r,source:e.sourceMatcher(r),runChildChunk(y,C,P,z){const M={...r,source:P,data:z},D=k.$2.getDefinitionsForSection(y),K="serialize"===c?A:O;for(const R of D)K(R,C,M)}}}function i(r,e,c=!1){const y=e.include||e.exclude;if(y){const C=y===e.include?1:-1,P=y[r];if("boolean"==typeof P)return 1===C?z=>P:z=>!P;if(Array.isArray(P))return c?z=>!0:1===C?z=>P.indexOf(z)>-1:z=>-1===P.indexOf(z);if(1===C)return z=>!1}}function a(r,e){return Promise.resolve().then(()=>{e=n("save",e);const c=S(r,e);return e.persistenceAdapter.exists(c)})}function l(r,e){return Promise.resolve().then(()=>{e=n("save",e);const c=S(r,e),y={},C=o(r,e);for(const[P,z]of k.$2.getRootSections()){const M=i(P,e,!0);if(!M||M(P)){const D=z.stateMatcher(y),K=u(C,z,"serialize"),R=k.$2.getDefinitionsForSection(P);for(const E of R)A(E,D,K)}}return e.persistenceAdapter.save(c,y)})}function h(r,e){return Promise.resolve().then(()=>{e=n("load",e);const c=S(r,e);return e.persistenceAdapter.load(c).then(y=>{const C=o(r,e);for(const[P,z]of k.$2.getRootSections()){const M=i(P,e,!0);if(!M||M(P)){const D=z.stateMatcher(y),K=u(C,z,"deserialize"),R=k.$2.getDefinitionsForSection(P);for(const E of R)O(E,D,K)}}return y})})}s(73375),s(26517),s(54131)},29552:(I,w,s)=>{let k;s.d(w,{$2:()=>b});class m{constructor(){this.rootChunkSections=new Map,this.chunkHandlers=new Map}static get(){return k||(k=new m)}registerRootChunkSection(d,S){this.rootChunkSections.has(d)||this.rootChunkSections.set(d,S)}registerChunkHandlerDefinition(d){const{chunkId:S}=d,A=this.chunkHandlers.get(S)||[];A.push(d),this.chunkHandlers.set(S,A)}getRootSections(){return Array.from(this.rootChunkSections.entries())}getDefinitionsForSection(d){return this.chunkHandlers.get(d)||[]}}const b=m.get()},28027:(I,w,s)=>{s.d(w,{dm:()=>a,Bg:()=>l,GI:()=>h});var k=s(8929),m=s(92198),b=s(77604),v=s(24850),d=s(72986),S=s(31307),A=s(80013),O=s(3805),n=s(14625),t=s(45811);function o(...f){const g={grid:["showFooter","showHeader"],columnVisibility:!0,columnOrder:!0,columns:["table"],dataColumn:["width"]};if(f.length>0)for(const p of f)u(g,p);return g}function u(f,g){for(const p of Object.keys(g)){const r=g[p];if(p in f){const e=f[p];if(Array.isArray(e)&&Array.isArray(r)){const c=new Set([...e,...r]);f[p]=Array.from(c.values())}}else f[p]=g[p]}}var i=s(94650);const a="state";class l{constructor(g,p,r){this.grid=g,this.injector=p,this.pluginCtrl=r,this._events=new k.xQ,this._removePlugin=r.setPlugin(a,this),this.afterLoadState=this._events.pipe((0,m.h)(e=>"load"===e.phase&&"after"===e.position),(0,b.h)(void 0)),this.afterSaveState=this._events.pipe((0,m.h)(e=>"save"===e.phase&&"after"===e.position),(0,b.h)(void 0)),this.onError=this._events.pipe((0,m.h)(e=>!!e.error),(0,v.U)(e=>({phase:e.phase,error:e.error}))),r.events.pipe(O.aL,(0,d.q)(1)).subscribe(e=>{const c={...this.loadOptions||{},avoidRedraw:!0};(0,t.nM)(g,c).then(y=>{if(y)return this._load(c)}).then(()=>{r.events.pipe(O.qL,(0,S.T)(1),(0,A.b)(500)).subscribe(y=>this.save())})}),r.events.pipe(O.vS).subscribe(e=>{e.wait(this.save()),this._events.complete()})}static create(g,p){const r=n.q5.find(g);return new l(g,p,r)}load(){return this._load(this.loadOptions)}save(){return(0,t.zL)(this.grid,this.saveOptions).then(()=>this._events.next({phase:"save",position:"after"})).catch(g=>this._events.next({phase:"save",position:"after",error:g}))}destroy(){this._removePlugin(this.grid)}_load(g){return(0,t.jw)(this.grid,g).then(()=>this._events.next({phase:"load",position:"after"})).catch(p=>this._events.next({phase:"load",position:"after",error:p}))}}let h=(()=>{class f extends l{constructor(p,r,e){super(p,r,e),this.loadOptions={include:o()},this.saveOptions={include:o()}}ngOnDestroy(){this.destroy()}}return f.\u0275fac=function(p){return new(p||f)(i.Y36(n.eZ),i.Y36(i.zs3),i.Y36(n.q5))},f.\u0275dir=i.lG2({type:f,selectors:[["pbl-ngrid","persistState",""]],inputs:{loadOptions:"loadOptions",saveOptions:"saveOptions"},outputs:{afterLoadState:"afterLoadState",afterSaveState:"afterSaveState",onError:"onError"},features:[i.qOj]}),f})()}}]);