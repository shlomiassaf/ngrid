(self.webpackChunkpebula=self.webpackChunkpebula||[]).push([[9951],{70946:(e,t,i)=>{"use strict";i.d(t,{a:()=>r});var n=i(3722),s=i(20377),o=i(91668),a=i(31572);let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.ae,s.aT,o.RF],n.ae,s.aT,o.RF]}),e})()},59951:(e,t,i)=>{"use strict";i.r(t),i.d(t,{InfiniteScrollExampleModule:()=>y});var n=i(64762),s=i(61511),o=i(64914),a=i(39030),r=i(45994),l=i(67857),p=i(91668),c=i(70946),d=i(46418),g=i(31572),m=i(88853);function u(e,t){1&e&&g._UZ(0,"mat-progress-bar",2)}let h=(()=>{let e=class{constructor(e){this.datasource=e,this.loading=!1,this.columns=(0,o.I7)().table({prop:"id",width:"100px"},{prop:"name",width:"100px"},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,o.AV)().onTrigger(e=>this.allPeople?(this.loading=!1,Promise.resolve(this.allPeople.slice(0,Math.min(this.allPeople.length,this.ds.source.length+50)))):this.datasource.getPeople(100,1e3).then(e=>(this.allPeople=e,this.allPeople.slice(0,Math.min(this.allPeople.length,(this.ds.source||[]).length+50))))).create()}ngAfterViewInit(){this.ds.onRenderedDataChanged.subscribe(()=>{this.ds.length-this.ds.renderStart<20&&(this.loading||(this.loading=!0,setTimeout(()=>this.ds.refresh(),1e3*Math.random())))})}};return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.BQ))},e.\u0275cmp=g.Xpm({type:e,selectors:[["pbl-infinite-scroll-example"]],decls:2,vars:3,consts:[[3,"dataSource","columns"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(e,t){1&e&&(g.TgZ(0,"pbl-ngrid",0),g.YNc(1,u,1,0,"mat-progress-bar",1),g.qZA()),2&e&&(g.Q6J("dataSource",t.ds)("columns",t.columns),g.xp6(1),g.Q6J("ngIf",t.loading))},directives:[m.eZ,s.O5,r.pW],styles:[""],encapsulation:2,changeDetection:0}),e=(0,n.gn)([(0,p.en)("pbl-infinite-scroll-example",{title:"Infinite Scroll"}),(0,n.w6)("design:paramtypes",[d.BQ])],e),e})();var w=i(71784);function f(e,t){1&e&&g._UZ(0,"mat-progress-bar",2)}let b=(()=>{let e=class{constructor(e){this.client=e,this.columns=(0,o.I7)().table({prop:"id",width:"100px",pIndex:!0},{prop:"name",width:"100px",editable:!0},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,l.R6)().withInfiniteScrollOptions({blockSize:100,initialVirtualSize:100}).withCacheOptions("sequenceBlocks").onTrigger(e=>{if(e.isInitial)return this.ds.setCacheSize(800),this.client.getPeople({pagination:{itemsPerPage:100,page:1}}).then(t=>(this.ds.updateVirtualSize(t.pagination.totalItems),e.updateTotalLength(t.pagination.totalItems),t.items));{console.log(e.fromRow,e.toRow);const t=e.fromRow%100,i=Math.floor(e.fromRow/100)+1,n=[this.client.getPeople({pagination:{itemsPerPage:100,page:i}})];return t>0&&n.push(this.client.getPeople({pagination:{itemsPerPage:100,page:i+1}})),new w.y(i=>(console.log(`NEW CALL WITH ${e.fromRow} - ${e.toRow}`),Promise.all(n).then(([e,n])=>{const s=e.items.slice(t,100);n&&s.push(...n.items.slice(0,t)),i.next(s),i.complete()}).catch(e=>i.error(e)),()=>console.log(`DONE WITH ${e.fromRow} - ${e.toRow}`)))}}).create()}};return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.eX))},e.\u0275cmp=g.Xpm({type:e,selectors:[["pbl-infinite-scroll-data-source-example"]],decls:3,vars:5,consts:[[3,"dataSource","columns"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(e,t){1&e&&(g.TgZ(0,"pbl-ngrid",0),g.YNc(1,f,1,0,"mat-progress-bar",1),g.ALo(2,"async"),g.qZA()),2&e&&(g.Q6J("dataSource",t.ds)("columns",t.columns),g.xp6(1),g.Q6J("ngIf",g.lcZ(2,3,t.ds.adapter.virtualRowsLoading)))},directives:[m.eZ,s.O5,r.pW],pipes:[s.Ov],styles:[""],encapsulation:2,changeDetection:0}),e=(0,n.gn)([(0,p.en)("pbl-infinite-scroll-data-source-example",{title:"Infinite Scroll Data Source"}),(0,n.w6)("design:paramtypes",[d.eX])],e),e})();var I=i(35156),x=i(84557);function S(e,t){1&e&&g._UZ(0,"mat-progress-bar",3)}function R(e,t){1&e&&g._UZ(0,"pbl-ngrid-row",4)}let P=(()=>{let e=class{constructor(e){this.client=e,this.columns=(0,o.I7)().table({prop:"id",width:"100px",pIndex:!0},{prop:"name",width:"100px",editable:!0},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,l.R6)().withInfiniteScrollOptions({blockSize:100,initialVirtualSize:100}).withCacheOptions("fragmentedBlocks",{strictPaging:!1}).onTrigger(e=>e.isInitial?(this.ds.setCacheSize(800),this.client.getPeople({pagination:{skip:0,limit:100}}).then(t=>(this.ds.updateVirtualSize(t.pagination.totalItems),e.updateTotalLength(t.pagination.totalItems),t.items))):(console.log(e.fromRow,e.toRow),this.client.getPeople({pagination:{skip:e.fromRow,limit:e.toRow-e.fromRow+1}}).then(e=>e.items))).create()}};return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.eX))},e.\u0275cmp=g.Xpm({type:e,selectors:[["pbl-index-based-paging-example"]],decls:4,vars:5,consts:[[3,"dataSource","columns"],["mode","indeterminate",4,"ngIf"],["in","","class","pbl-ngrid-infinite-virtual-row","row","",4,"pblNgridInfiniteVirtualRowDef"],["mode","indeterminate"],["in","","row","",1,"pbl-ngrid-infinite-virtual-row"]],template:function(e,t){1&e&&(g.TgZ(0,"pbl-ngrid",0),g.YNc(1,S,1,0,"mat-progress-bar",1),g.ALo(2,"async"),g.YNc(3,R,1,0,"pbl-ngrid-row",2),g.qZA()),2&e&&(g.Q6J("dataSource",t.ds)("columns",t.columns),g.xp6(1),g.Q6J("ngIf",g.lcZ(2,3,t.ds.adapter.virtualRowsLoading)))},directives:[m.eZ,s.O5,I.a,r.pW,x.w],pipes:[s.Ov],styles:[""],encapsulation:2,changeDetection:0}),e=(0,n.gn)([(0,p.en)("pbl-index-based-paging-example",{title:"Index Based Paging"}),(0,n.w6)("design:paramtypes",[d.eX])],e),e})(),v=(()=>{let e=class{constructor(e){this.client=e,this.columns=(0,o.I7)().table({prop:"id",width:"100px",pIndex:!0},{prop:"name",width:"100px"},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,l.R6)().withInfiniteScrollOptions({blockSize:100,initialVirtualSize:100}).withCacheOptions("fragmentedBlocks",{strictPaging:!1}).setCustomTriggers("filter","sort").onTrigger(e=>{if(e.isInitial)return this.ds.setCacheSize(800),this.client.getPeople({pagination:{skip:0,limit:100}}).then(t=>(this.ds.updateVirtualSize(t.pagination.totalItems),e.updateTotalLength(t.pagination.totalItems),t.items));switch(e.eventSource){case"infiniteScroll":return this.client.getPeople({pagination:{skip:e.fromRow,limit:e.toRow-e.fromRow+1}}).then(e=>e.items);case"customTrigger":break;default:throw new Error("This should NEVER EVENT happen...")}}).create()}};return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.eX))},e.\u0275cmp=g.Xpm({type:e,selectors:[["pbl-custom-triggers-example"]],decls:1,vars:2,consts:[[3,"dataSource","columns"]],template:function(e,t){1&e&&g._UZ(0,"pbl-ngrid",0),2&e&&g.Q6J("dataSource",t.ds)("columns",t.columns)},directives:[m.eZ],styles:[""],encapsulation:2,changeDetection:0}),e=(0,n.gn)([(0,p.en)("pbl-custom-triggers-example",{title:"Custom Triggers"}),(0,n.w6)("design:paramtypes",[d.eX])],e),e})(),y=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[s.ez,c.a,r.Cv,o.dC,a.sx,l.a5]]}),e=(0,n.gn)([(0,p.qB)(h,b,P,v)],e),e})()}}]);