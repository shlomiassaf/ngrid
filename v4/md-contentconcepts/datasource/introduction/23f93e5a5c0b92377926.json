{"id":"concepts/datasource/introduction","title":"Introduction","contents":"<h1 id=\"the-data-source\"><a href=\"#the-data-source\" aria-hidden><span class=\"icon icon-link\"></span></a>The Data Source</h1>\n<p>To render rows of data the grid requires a source of data.<br>\nThe obvious datasource is the array and in fact at the core of each grid or table an array is used to render the rows.</p>\n<p>You can provide the following datasource`s:</p>\n<ul>\n<li>Array - Direct interface</li>\n<li>Promise<Array> - Async interface</li>\n<li>Observable<Array> - Async stream interface</li>\n<li><code class=\"language-text\">PblDataSource</code> - Async stream interface</li>\n</ul>\n<p><strong>nGrid</strong> supports all of the above but works with <code class=\"language-text\">PblDataSource&lt;T&gt;</code>.\nWhen an array, promise or observable is provided it is converted into <code class=\"language-text\">PblDataSource&lt;T&gt;</code>.</p>\n<h2 id=\"array-promise-observable\"><a href=\"#array-promise-observable\" aria-hidden><span class=\"icon icon-link\"></span></a>Array, Promise, Observable</h2>\n<p>The most primitive source of data is an array of items where each item represents a row in the grid.</p>\n<div><div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'John Doe'</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token operator\">:</span> <span class=\"token string\">'john.doe@anonymous.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<div pbl-example-view=\"pbl-datasource-introduction-simple-model-example\" containerClass=\"mat-elevation-z7\"></div>\n<p>Using a <strong>Promise</strong> adds async functionality and using an <strong>Observable</strong> adds streaming capabilities on top of that.</p>\n<p>In simple scenarios this is enough but it stops there, these datasource`s does not scale.</p>\n<h2 id=\"scaling-up\"><a href=\"#scaling-up\" aria-hidden><span class=\"icon icon-link\"></span></a>Scaling up</h2>\n<p><strong>nGrid</strong> must support different scenarios with various a lot of features.<br>\nEach feature is required to work in all scenarios.</p>\n<p>We can group all of the scenarios into 2 working modes:</p>\n<ul>\n<li><strong>Client Side</strong> - The entire datasource is in one collection</li>\n<li><strong>Server Size</strong> - A portion of the datasource is available, getting more items require a manual operation (e.g. calling the server)</li>\n</ul>\n<p>With 3 common features: Sorting, Filtering and Pagination.</p>\n<p>In <strong>client side</strong> mode the entire logic is local, performed on the entire collection.<br>\nIn <strong>server side</strong> this is not possible\nand the logic sits on the remote source.</p>\n<p>We need to find a simple way to support both modes in a single, easy to use API.<br>\nIt has to be simple to use and easy to extend so we can create variations from these groups.</p>\n<h2 id=\"ngrids-datasource\"><a href=\"#ngrids-datasource\" aria-hidden><span class=\"icon icon-link\"></span></a>NGrid's DataSource</h2>\n<p>To scale up, <strong>nGrid</strong> provides the datasource container <code class=\"language-text\">PblDataSource&lt;T&gt;</code> with a simple to use datasource factory.</p>\n<p>Using the <code class=\"language-text\">PblDataSource&lt;T&gt;</code> API you can invoke a manual data update, define the sorters, filters and more.<br>\nUsing the factory you can create, define and operate a datasource with a simple API that handles sorting, filtering and pagination for us in client side mode\nwhile providing an dead simple API for reacting to sort, filter and pagination updates in server side mode.</p>\n<div pbl-example-view=\"pbl-working-with-pbl-datasource-example\" containerClass=\"table-height-300 mat-elevation-z7\"></div>\n<blockquote class=\"info icon\">\n<div class=\"icon-location\"></div>\n \n<strong>Client side</strong>\n mode does not mean we must have the data locally, we can still fetch it from a remote server but it will be all at once, in once chunk.\n</blockquote>\n<h2 id=\"datasource-factory\"><a href=\"#datasource-factory\" aria-hidden><span class=\"icon icon-link\"></span></a>Datasource Factory</h2>\n<p>Using the datasource factory we define and create the datasource.</p>\n<p>The core functionality of the datasource is to provide data and with the factory this is very simple:</p>\n<div><div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> dataSource <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createDS</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Person<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">onTrigger</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>The handler provided to the <code class=\"language-text\">onTrigger</code> method accepts an event object (<code class=\"language-text\">PblDataSourceTriggerChangedEvent</code>) and returns a <code class=\"language-text\">DataSourceOf&lt;T&gt;</code> (array, promise or observable)</p>\n<p>The event describes the source of the trigger and any additional data related to the trigger. For example, if the trigger originated from\na pagination change, sort change etc.</p>\n<p>Based on the definitions, the factory will trigger events or handle them internally.</p>\n<blockquote class=\"info icon\">\n<div class=\"icon-location\"></div>\n The datasource factory implements a \n<strong>Fluent API</strong>\n</blockquote>\n<p>The various scenarios is covered in depth <a href=\"../factory\">in here</a>.</p>\n"}