(self.webpackChunkpebula=self.webpackChunkpebula||[]).push([[3055],{83055:(t,e,s)=>{"use strict";s.r(e),s.d(e,{SortHeaderExampleModule:()=>I});var i=s(64762),r=s(61511),o=s(14460),n=s(64914),a=s(55959),c=s(31572),l=s(19861),d=s(7997);const h="bsSortable";let b=(()=>{class t{constructor(t,e){this.grid=t,this.pluginCtrl=e,this.sortables=new Map,this._stateChanges=new a.xQ,this.start="asc",this.bsArrowPosition="after",this.sortChange=new c.vpe,this._direction="",this._disabled=!1,this.origin="click",this._removePlugin=e.setPlugin(h,this),this.sortChange.pipe((0,d.dW)(this)).subscribe(t=>{this.onSort(t,this.origin),this.origin="click"}),this.handleEvents()}get bsSortableDisabled(){return this._disabled}set bsSortableDisabled(t){this._disabled=(0,l.Ig)(t)}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=(0,l.Ig)(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let e=function(t,e){let s=["asc","desc"];return"desc"==t&&s.reverse(),e||s.push(""),s}(t.start||this.start,null!=t.disableClear?t.disableClear:this.disableClear),s=e.indexOf(this.direction)+1;return s>=e.length&&(s=0),e[s]}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._removePlugin(this.grid),d.dW.kill(this)}onSort(t,e){const s=this.grid,i=s.columnApi.visibleColumns.find(e=>e.id===t.active);if("click"===e&&i&&i.sort){const e={},r="function"==typeof i.sort&&i.sort;t.direction&&(e.order=t.direction),r&&(e.sortFn=r);const o=s.ds.sort;if(i===o.column&&e.order===(o.sort||{}).order)return;s.ds.setSort(i,e)}}handleEvents(){const t=t=>{const{column:e}=t,s=t.sort?t.sort.order:void 0;if(e){if(this.active===e.id&&this.direction===(s||""))return;const t=this.sortables.get(e.id);t&&(this.origin="ds",this.active=void 0,t.start=s||"asc",t._handleClick())}else if(this.active){const t=this.sortables.get(this.active);if(t){if(!t.disableClear){let e;for(;e=this.getNextSortDirection(t);)this.direction=e}this.origin="ds",t._handleClick()}}};this.pluginCtrl.events.pipe(d.aL).subscribe(e=>{var s;const i=this.active;(null===(s=this.grid.ds)||void 0===s?void 0:s.sort)&&(!this.grid.ds.sort.column&&i?this.onSort({active:this.active,direction:this.direction||"asc"},this.origin):this.grid.ds.sort.column&&!i&&setTimeout(()=>t(this.grid.ds.sort)))}),this.pluginCtrl.events.subscribe(e=>{"onDataSource"===e.kind&&(d.dW.kill(this,e.prev),this.active&&this.onSort({active:this.active,direction:this.direction||"asc"},this.origin),this.grid.ds.sortChange.pipe((0,d.dW)(this,e.curr)).subscribe(e=>{t(e)}))})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(n.eZ),c.Y36(n.q5))},t.\u0275dir=c.lG2({type:t,selectors:[["pbl-ngrid","bsSortable",""]],inputs:{active:["bsSortableActive","active"],start:["bsSortableStart","start"],direction:["bsSortableDirection","direction"],bsArrowPosition:"bsArrowPosition",disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["pblBsSortable"],features:[c.TTD]}),t})();var u=s(31906);const p=["*"];let g=(()=>{class t{constructor(t,e){this.plugin=e,(0,u.T)(e.sortChange,e._stateChanges).subscribe(()=>{this._isSorted()&&this._updateArrowDirection(),t.markForCheck()})}ngOnInit(){this._updateArrowDirection(),this.plugin.register(this)}ngOnDestroy(){this.plugin.deregister(this),d.dW.kill(this)}_handleClick(){this._isDisabled()||this._toggleOnInteraction()}_updateArrowDirection(){this._direction=this._isSorted()?this.plugin.direction:this.start||this.plugin.start}_isAfter(){return"after"===this.plugin.bsArrowPosition}_isSorted(){return this.plugin.active==this.id&&("asc"===this.plugin.direction||"desc"===this.plugin.direction)}_isDisabled(){return this.plugin.bsSortableDisabled}_toggleOnInteraction(){this.plugin.sort(this)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.sBO),c.Y36(b))},t.\u0275cmp=c.Xpm({type:t,selectors:[["pbl-bs-sortable"]],hostBindings:function(t,e){1&t&&c.NdJ("click",function(){return e._handleClick()})},ngContentSelectors:p,decls:2,vars:10,consts:[["role","button",1,"pbl-bs-sortable"]],template:function(t,e){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA()),2&t&&c.ekj("pbl-bs-sortable-after",e._isAfter())("pbl-bs-sortable-sorted",e._isSorted())("pbl-bs-sortable-disabled",e._isDisabled())("asc","asc"===e._direction)("desc","desc"===e._direction)},styles:['.pbl-bs-sortable{cursor:pointer;user-select:none;-webkit-user-select:none}.pbl-bs-sortable.pbl-bs-sortable-sorted{position:relative}.pbl-bs-sortable.pbl-bs-sortable-sorted:before{content:"";display:block;position:absolute;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAmxJREFUeAHtmksrRVEUx72fH8CIGQNJkpGUUmakDEiZSJRIZsRQmCkTJRmZmJgQE0kpX0D5DJKJgff7v+ru2u3O3vvc67TOvsdatdrnnP1Y///v7HvvubdbUiIhBISAEBACQkAICAEhIAQ4CXSh2DnyDfmCPEG2Iv9F9MPlM/LHyAecdyMzHYNwR3fdNK/OH9HXl1UCozD24TCvILxizEDWIEzA0FcM8woCgRrJCoS5PIwrANQSMAJX1LEI9bqpQo4JYNFFKRSvIgsxHDVnqZgIkPnNBM0rIGtYk9YOOsqgbgepRCfdbmFtqhFkVEDVPjJp0+Z6e6hRHhqBKgg6ZDCvYBygVmUoEGoh5JTRvIJwhJo1aUOoh4CLPMyvxxi7EWOMgnCGsXXI1GIXlZUYX7ucU+kbR8NW8lh3O7cue0Pk32MKndfUxQFAwxdirk3fHappAnc0oqDPzDfGTBrCfHP04dM4oTV8cxr0SVzH9FF07xD3ib6xCDE+M+aUcVygtWzzbtGX2rPBrEUYfecfQkaFzYi6HjVnGBdtL7epqAlc1+jRdAap74RrnPc4BCijttY2tRcdN0g17w7HqZrXhdJTYAuS3hd8z+vKgK3V1zWPae0mZDMykadBn1hTQBLnZNwVrJpSe/NwEeDsEwCctEOsJTsgxLvCqUl2ACftEGvJDgjxrnBqkh3ASTvEWrIDQrwrnJpkB3DSDrGW7IAQ7wqnJtkBnLRztejXXVu4+mxz/nQ9jR1w5VB86ejLTFcnnDwhzV+F6T+CHZlx6THSjn76eyyBIOPHyDakhBAQAkJACAgBISAEhIAQYCLwC8JxpAmsEGt6AAAAAElFTkSuQmCC") no-repeat;background-size:22px;width:22px;height:22px;margin-left:-22px}.pbl-bs-sortable.pbl-bs-sortable-sorted.pbl-bs-sortable-after:before{right:0;transform:translateX(100%);-ms-transform:translateX(100%)}.pbl-bs-sortable.pbl-bs-sortable-sorted.desc:before{transform:rotate(180deg);-ms-transform:rotate(180deg)}.pbl-bs-sortable.pbl-bs-sortable-sorted.desc.pbl-bs-sortable-after:before{transform:translateX(100%) rotate(180deg);-ms-transform:translateX(100%) rotate(180deg)}'],encapsulation:2,changeDetection:0}),t})();class m extends n.id{constructor(t){super(),this.cfr=t,this.name="bsSortContainer",this.kind="dataHeaderExtensions",this.projectContent=!0}shouldRender(t){return!!t.col.sort&&!!t.injector.get(b,!1)}getFactory(t){return this.cfr.resolveComponentFactory(g)}onCreated(t,e){this.deregisterId(t,e.instance.id=t.col.id),e.changeDetectorRef.markForCheck()}deregisterId(t,e){const s=t.injector.get(b),i=s.sortables.get(e);i&&s.deregister(i)}}let f=(()=>{class t{constructor(t,e){this.registry=t,t.addMulti("dataHeaderExtensions",new m(e))}}return t.NGRID_PLUGIN=(0,n.Ic)({id:h},b),t.\u0275fac=function(e){return new(e||t)(c.LFG(n.B6),c.LFG(c._Vd))},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.ez,n.dC]]}),t})();var A=s(91668),v=s(70946),C=s(5553),S=s(46418),x=s(88853);let k=(()=>{let t=class{constructor(t){this.datasource=t,this.columns=(0,n.I7)().default({minWidth:100}).table({prop:"id",sort:!0,width:"40px"},{prop:"name",sort:!0},{prop:"gender",sort:!0,width:"50px"},{prop:"birthdate",type:"date"}).build(),this.ds=(0,n.AV)().onTrigger(()=>this.datasource.getPeople(100,500)).create()}};return t.\u0275fac=function(e){return new(e||t)(c.Y36(S.BQ))},t.\u0275cmp=c.Xpm({type:t,selectors:[["pbl-bs-sort-header-example"]],decls:1,vars:2,consts:[["bsSortable","",3,"dataSource","columns"]],template:function(t,e){1&t&&c._UZ(0,"pbl-ngrid",0),2&t&&c.Q6J("dataSource",e.ds)("columns",e.columns)},directives:[x.eZ,b],styles:[""],encapsulation:2,changeDetection:0}),t=(0,i.gn)([(0,A.en)("pbl-bs-sort-header-example",{title:"Sort Header"}),(0,i.w6)("design:paramtypes",[S.BQ])],t),t})(),w=(()=>{let t=class{constructor(t){this.datasource=t,this.columns=(0,n.I7)().default({minWidth:100}).table({prop:"id",sort:!0,width:"40px"},{prop:"name",sort:!0},{prop:"gender",sort:!0,width:"50px"},{prop:"birthdate",type:"date"}).build(),this.ds=(0,n.AV)().onTrigger(()=>this.datasource.getPeople(500)).create()}};return t.\u0275fac=function(e){return new(e||t)(c.Y36(S.BQ))},t.\u0275cmp=c.Xpm({type:t,selectors:[["pbl-bs-active-column-and-direction-example"]],decls:1,vars:2,consts:[["bsSortable","","bsSortableActive","name","bsSortableDirection","desc",3,"dataSource","columns"]],template:function(t,e){1&t&&c._UZ(0,"pbl-ngrid",0),2&t&&c.Q6J("dataSource",e.ds)("columns",e.columns)},directives:[x.eZ,b],styles:[""],encapsulation:2,changeDetection:0}),t=(0,i.gn)([(0,A.en)("pbl-bs-active-column-and-direction-example",{title:"Sorting with default active column and direction"}),(0,i.w6)("design:paramtypes",[S.BQ])],t),t})();var D=s(3722);function y(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().toggleActive(e)}),c._uU(1),c.qZA()}if(2&t){const t=e.$implicit,s=c.oxw();c.xp6(1),c.AsE("",t," [",s.getNextDirection(t),"]")}}const _=function(){return["id","name","gender"]};let B=(()=>{let t=class{constructor(t){this.datasource=t,this.columns=(0,n.I7)().default({minWidth:100}).table({prop:"id",sort:!0,width:"40px"},{prop:"name",sort:!0},{prop:"gender",sort:!0,width:"50px"},{prop:"birthdate",type:"date"}).build(),this.ds=(0,n.AV)().onTrigger(()=>this.datasource.getPeople(500)).create(),this.ds.setSort(this.columns.table.cols[1],{order:"asc"})}clear(){this.ds.setSort()}toggleActive(t){const e=this.ds.sort;let s="asc";if(e&&e.column&&e.column.id===t)if(s=e.sort&&e.sort.order,"asc"===s)s="desc";else{if("desc"===s)return void this.clear();s="asc"}this.ds.hostGrid.setSort(t,{order:s})}getNextDirection(t){const e=this.ds.sort;return e.column&&e.column.id===t?"asc"===e.sort.order?"desc":"clear":"asc"}};return t.\u0275fac=function(e){return new(e||t)(c.Y36(S.BQ))},t.\u0275cmp=c.Xpm({type:t,selectors:[["pbl-bs-programmatic-example"]],decls:6,vars:4,consts:[["bsSortable","",3,"dataSource","columns"],["fxLayout","row","fxLayoutGap","16px",2,"padding","8px"],["type","button","class","btn btn-outline-primary","fxFlex","noshrink","ngbButton","",3,"click",4,"ngFor","ngForOf"],["fxFlex","*"],["type","button","ngbButton","",1,"btn","btn-outline-danger",3,"click"],["type","button","fxFlex","noshrink","ngbButton","",1,"btn","btn-outline-primary",3,"click"]],template:function(t,e){1&t&&(c._UZ(0,"pbl-ngrid",0),c.TgZ(1,"div",1),c.YNc(2,y,2,2,"button",2),c._UZ(3,"div",3),c.TgZ(4,"button",4),c.NdJ("click",function(){return e.clear()}),c._uU(5,"Clear"),c.qZA(),c.qZA()),2&t&&(c.Q6J("dataSource",e.ds)("columns",e.columns),c.xp6(2),c.Q6J("ngForOf",c.DdM(3,_)))},directives:[x.eZ,b,D.xw,D.SQ,r.sg,D.yH],styles:[""],encapsulation:2,changeDetection:0}),t=(0,i.gn)([(0,A.en)("pbl-bs-programmatic-example",{title:"Programmatic Sorting"}),(0,i.w6)("design:paramtypes",[S.BQ])],t),t})(),I=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[C.y,r.ez,v.a,o.xZ,n.dC,f]]}),t=(0,i.gn)([(0,A.qB)(k,w,B)],t),t})()}}]);