"use strict";(self.webpackChunkngrid_docs_app=self.webpackChunkngrid_docs_app||[]).push([[2502],{42502:(H,B,u)=>{u.d(B,{sx:()=>c});var R=u(48295),U=(u(50613),u(69808)),y=u(47796),v=u(3805),I=u(14625),M=u(5e3);class c{constructor(A){I.q5.onCreatedSafe(c,(Y,N)=>{const F=A.get(R.dm);F&&!0===F.autoEnable&&N.onInit().subscribe(()=>{N.hasPlugin(R.dm)||N.createPlugin(R.dm)})})}}c.NGRID_PLUGIN=(0,I.Ic)({id:R.dm,factory:"create",runOnce:R.Rm},R.V4),c.\u0275fac=function(A){return new(A||c)(M.LFG(v.f8))},c.\u0275mod=M.oAB({type:c}),c.\u0275inj=M.cJS({imports:[U.ez,y.HT,I.dC]})},50613:(H,B,u)=>{u.d(B,{e:()=>v});var R=u(63191),P=u(3805),U=u(14625),y=u(5e3);let v=(()=>{class I{constructor(c,W,A){this._click=!1,this._dblClick=!1,A.onInit().subscribe(()=>{this.targetEventsPlugin=A.getPlugin("targetEvents")||A.createPlugin("targetEvents"),this.update()})}set cellEditClick(c){c=(0,R.Ig)(c),this._click!==c&&(this._click=c,this.update())}set cellEditDblClick(c){c=(0,R.Ig)(c),this._dblClick!==c&&(this._dblClick=c,this.update())}ngOnDestroy(){P.dW.kill(this)}update(){this.targetEventsPlugin&&(P.dW.kill(this,this.targetEventsPlugin),this._click&&this.targetEventsPlugin.cellClick.pipe((0,P.dW)(this,this.targetEventsPlugin)).subscribe(c=>{"data"===c.type&&c.column.editable&&c.context.startEdit(!0)}),this._dblClick&&this.targetEventsPlugin.cellDblClick.pipe((0,P.dW)(this,this.targetEventsPlugin)).subscribe(c=>{"data"===c.type&&c.column.editable&&c.context.startEdit(!0)}))}}return I.\u0275fac=function(c){return new(c||I)(y.Y36(U.eZ),y.Y36(y.zs3),y.Y36(U.q5))},I.\u0275dir=y.lG2({type:I,selectors:[["pbl-ngrid","cellEditClick",""],["pbl-ngrid","cellEditDblClick",""]],inputs:{cellEditClick:"cellEditClick",cellEditDblClick:"cellEditDblClick"}}),I})()},48295:(H,B,u)=>{u.d(B,{dm:()=>_,V4:()=>K,nF:()=>de,Rm:()=>ce});var R=u(30839),P=u(23753),U=u(98723),y=u(7625),v=u(92198),I=u(24850),M=u(42654),c=u(41177);class A{constructor(e){this.closingSelector=e}call(e,i){return i.subscribe(new Y(e,this.closingSelector))}}class Y extends c.Ds{constructor(e,i){super(e),this.closingSelector=i,this.subscribing=!1,this.openBuffer()}_next(e){this.buffer.push(e)}_complete(){const e=this.buffer;e&&this.destination.next(e),super._complete()}_unsubscribe(){this.buffer=void 0,this.subscribing=!1}notifyNext(){this.openBuffer()}notifyComplete(){this.subscribing?this.complete():this.openBuffer()}openBuffer(){let l,{closingSubscription:e}=this;e&&(this.remove(e),e.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{const{closingSelector:C}=this;l=C()}catch(C){return this.error(C)}e=new M.w,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add((0,c.ft)(l,new c.IY(this))),this.subscribing=!1}}class F{constructor(e){this.durationSelector=e}call(e,i){return i.subscribe(new ee(e,this.durationSelector))}}class ee extends c.Ds{constructor(e,i){super(e),this.durationSelector=i,this.hasValue=!1}_next(e){try{const i=this.durationSelector.call(this,e);i&&this._tryNext(e,i)}catch(i){this.destination.error(i)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(e,i){let l=this.durationSubscription;this.value=e,this.hasValue=!0,l&&(l.unsubscribe(),this.remove(l)),l=(0,c.ft)(i,new c.IY(this)),l&&!l.closed&&this.add(this.durationSubscription=l)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const e=this.value,i=this.durationSubscription;i&&(this.durationSubscription=void 0,i.unsubscribe(),this.remove(i)),this.value=void 0,this.hasValue=!1,super._next(e)}}}var b=u(5e3),j=u(14625);function z(t){return!!t.cellTarget}function J(t){return z(t)&&!!t.context}function G(t){return"row"===t.getAttribute("role")}function Z(t){for(;t.parentElement;){if(G(t.parentElement))return t;t=t.parentElement}}function $(t,e){const i=t.getAttribute("data-rowtype")||"data";let l=0;switch(i){case"data":const C=t;for(;t.previousElementSibling;)l++,t=t.previousElementSibling;for(l=Math.min(l,e.length-1);l>-1;){if(e.get(l).rootNodes[0]===C)return{type:"data",subType:"data",rowIndex:l};l--}return;case"header":case"footer":return{type:i,subType:"data",rowIndex:l};default:for(;t.previousElementSibling&&t.previousElementSibling.getAttribute("data-rowtype")===i;)l++,t=t.previousElementSibling;return{type:"meta-footer"===i?"footer":"header",subType:"meta",rowIndex:l}}}function Q(t,e,i){const l=[];for(const C of i)for(const D of e)t.findRowInCache(C.rowIdent).cells[D.colIndex]&&l.push({rowIdent:C.rowIdent,colIndex:D.colIndex});return l}var X=u(2994),ie=u(87545),V=u(91159);const se=/^mac/.test(navigator.platform.toLowerCase()),q=t=>0===t.source.button;function oe(t){const e=()=>"cell"===t.grid.focusMode,i=function le(t){const{contextApi:e}=t.grid;function T(h){const g=h.context,f=e.focusedCell||{rowIdent:g.rowContext.identity,colIndex:g.index},p=e.findRowInCache(f.rowIdent),m=[],x=[];for(const r of function ne(t,e){const i=Math.min(t,e),l=i===t?e:t,C=[];for(let D=i+1;D<l;D++)C.push(D);return C}(f.colIndex,g.index))m.push({rowIdent:f.rowIdent,colIndex:r});m.push({rowIdent:f.rowIdent,colIndex:g.index});const n=Math.abs(g.rowContext.dsIndex-p.dsIndex),o=p.dsIndex>g.rowContext.dsIndex?-1:1;for(let r=1;r<=n;r++){const s=e.findRowInCache(f.rowIdent,o*r,!0);x.push({rowIdent:s.identity,colIndex:f.colIndex})}const d=Q(e,m,x);e.selectCells([f,...m,...x,...d],!0)}return{handleMouseDown:function l(h){e.focusedCell&&h.source.shiftKey?T(h):(se?h.source.metaKey:h.source.ctrlKey)?h.context.selected?e.unselectCells([h.context]):e.selectCells([h.context]):function i(h,g,f){e.focusCell({rowIdent:h,colIndex:g})}(h.context.rowContext.identity,h.context.index)},handleKeyDown:function C(h){const g=h.source;if(z(h)){const f=h.cellTarget;let p=1,m=!1;switch(g.keyCode){case V.LH:p=-1;case V.JH:break;case V.oh:p=-1;case V.SV:m=!0;break;default:return}h.source.preventDefault(),h.source.stopPropagation();let x=e.focusedCell;if(!x){const n=e.getCell(f);x={rowIdent:n.rowContext.identity,colIndex:n.index}}g.shiftKey?function D(h,g){const{rowIdent:f,colIndex:p}=h,m=e.findRowInCache(f),[x,n]=g,o=[m.cells[p-1],m.cells[p+1]],d=[e.findRowInCache(f,-1,!0),e.findRowInCache(f,1,!0)];let r=(o[0]&&o[0].selected?-1:0)+(o[1]&&o[1].selected?1:0),s=(d[0]&&d[0].cells[p].selected?-1:0)+(d[1]&&d[1].cells[p].selected?1:0);0===r&&(r+=x),0===s&&(s+=n);const a=[];if(0!==r){let k=p,E=m.cells[p];for(;E&&E.selected;)a.push({rowIdent:f,colIndex:k}),k+=r,E=m.cells[k];x&&(r===x?E&&a.push({rowIdent:f,colIndex:k}):a.pop())}const w=[];if(0!==s){let k=f,E=e.findRowInCache(k,s,!0);for(;E&&E.cells[p].selected;)k=E.identity,w.push({rowIdent:k,colIndex:p}),E=e.findRowInCache(k,s,!0);n&&(s===n?E&&w.push({rowIdent:E.identity,colIndex:p}):w.pop())}const S=Q(e,a,w);e.selectCells([h,...a,...w,...S],!0)}(x,m?[p,0]:[0,p]):function O(h,g){const f=e.findRowInCache(h.rowIdent,g[1],!0);f&&e.focusCell({rowIdent:f.identity,colIndex:h.colIndex+g[0]})}(x,m?[p,0]:[0,p])}},handleSelectionChangeByMouseClickAndMove:T}}(t);t.keyDown.pipe((0,v.h)(e)).subscribe(i.handleKeyDown),t.mouseDown.pipe((0,v.h)(e),(0,v.h)(J),(0,v.h)(q),(0,X.b)(l=>{l.source.stopPropagation(),l.source.preventDefault()}),(0,X.b)(i.handleMouseDown),(0,ie.w)(()=>t.cellEnter.pipe((0,y.R)(t.mouseUp))),(0,v.h)(J),(0,v.h)(q)).subscribe(i.handleSelectionChangeByMouseClickAndMove)}const _="targetEvents";function L(t){return t.observers.length>0}function ce(){j.dS.extendProperty("editable")}class K{constructor(e,i,l){this.grid=e,this.injector=i,this.pluginCtrl=l,this.rowClick=new b.vpe,this.rowDblClick=new b.vpe,this.rowEnter=new b.vpe,this.rowLeave=new b.vpe,this.cellClick=new b.vpe,this.cellDblClick=new b.vpe,this.cellEnter=new b.vpe,this.cellLeave=new b.vpe,this.mouseDown=new b.vpe,this.mouseUp=new b.vpe,this.keyUp=new b.vpe,this.keyDown=new b.vpe,this.destroyed=new R.t,this._removePlugin=l.setPlugin(_,this),l.onInit().subscribe(()=>this.init())}static create(e,i){const l=j.q5.find(e);return new K(e,i,l)}init(){this.setupDomEvents(),oe(this)}setupDomEvents(){const e=this.grid,i=this.pluginCtrl.extApi.cdkTable,l=i._element,C=(n,o)=>{const d=n.parentElement,r=$(d,i._rowOutlet.viewContainer);if(r){const s=Object.assign(Object.assign({},r),{source:o,cellTarget:n,rowTarget:d});if("data"===r.type)s.row=e.ds.renderedData[r.rowIndex];else if("meta"===s.subType){const{metaRowService:a}=this.pluginCtrl.extApi.rowsApi,w="header"===s.type?a.header:a.footer;for(const S of[w.fixed,w.row,w.sticky]){const k=S.find(E=>E.el===s.rowTarget);if(k){s.rowIndex=k.index;break}}}if(s.colIndex=function te(t){let e=0;for(;t=t.previousElementSibling;)e++;return e}(n),"data"===r.subType){const a=this.grid.columnApi.findColumnAt(s.colIndex),w=this.grid.columnApi.indexOf(a);s.column=a,s.context=this.pluginCtrl.extApi.contextApi.getCell(s.rowIndex,w),s.context||(this.pluginCtrl.extApi.contextApi.clear(!0),s.context=this.pluginCtrl.extApi.contextApi.getCell(s.rowIndex,w))}else{const a=this.pluginCtrl.extApi.columnStore,w=("header"===r.type?a.metaHeaderRows:a.metaFooterRows)[s.rowIndex],S=a.find(w.keys[s.colIndex]);w.isGroup?(s.subType="meta-group",s.column="header"===r.type?S.headerGroup:S.footerGroup):s.column="header"===r.type?S.header:S.footer}return s}},D=(n,o,d)=>{if(d){const r={source:o,rowTarget:n,type:d.type,subType:d.subType,rowIndex:d.rowIndex,root:d};return"data"===d.type&&(r.row=d.row,r.context=d.context.rowContext),r}{const r=$(n,i._rowOutlet.viewContainer);if(r){const s=Object.assign(Object.assign({},r),{source:o,rowTarget:n});if("data"===r.type){const a=this.pluginCtrl.extApi.contextApi.getRow(r.rowIndex);if(!a)return;s.context=a,s.row=a.$implicit}if("data"!==r.subType){const a=this.pluginCtrl.extApi.columnStore;("header"===r.type?a.metaHeaderRows:a.metaFooterRows)[s.rowIndex].isGroup&&(s.subType="meta-group")}return s}}};let T,O;const h=n=>{if(T){const o=T;return this.cellLeave.emit(Object.assign({},o,{source:n})),T=void 0,o}},g=n=>{if(O){const o=O;return this.rowLeave.emit(Object.assign({},o,{source:n})),O=void 0,o}},f=n=>{const o=function re(t){const e=Z(t.target);return e?{type:"cell",target:e}:G(t.target)?{type:"cell",target:t.target}:void 0}(n);if(o)if("cell"===o.type){const d=C(o.target,n);if(d)return{type:o.type,event:d,waitTime:L(this.cellDblClick)?250:1}}else if("row"===o.type){const d=D(o.target,n);if(d)return{type:o.type,event:d,waitTime:L(this.rowDblClick)?250:1}}},p=n=>{const o="cell"===n.type?n.event:void 0;return{cellEvent:o,rowEvent:o?D(o.rowTarget,o.source,o):n.event}},m=(n,o)=>{(0,P.R)(l,n).pipe((0,y.R)(this.destroyed),(0,v.h)(d=>L(o)),(0,I.U)(f),(0,v.h)(d=>!!d)).subscribe(d=>{const{cellEvent:r,rowEvent:s}=p(d);o.emit(r||s),this.syncRow(r||s)})};m("mouseup",this.mouseUp),m("mousedown",this.mouseDown),m("keyup",this.keyUp),m("keydown",this.keyDown);const x=(0,P.R)(l,"click").pipe((0,y.R)(this.destroyed),(0,v.h)(n=>L(this.cellClick)||L(this.cellDblClick)||L(this.rowClick)||L(this.rowDblClick)),(0,I.U)(f),(0,v.h)(n=>!!n));x.pipe(function W(t){return function(e){return e.lift(new A(t))}}(()=>x.pipe(function N(t){return e=>e.lift(new F(t))}(n=>(0,U.H)(n.waitTime)))),(0,v.h)(n=>n.length>0)).subscribe(n=>{const o=n.shift(),d=1===n.length,{cellEvent:r,rowEvent:s}=p(o);d?(r&&this.cellDblClick.emit(r),this.rowDblClick.emit(s)):(r&&this.cellClick.emit(r),this.rowClick.emit(s)),this.syncRow(r||s)}),(0,P.R)(l,"mouseleave").pipe((0,y.R)(this.destroyed)).subscribe(n=>{let o=h(n);o=g(n)||o,o&&this.syncRow(o)}),(0,P.R)(l,"mousemove").pipe((0,y.R)(this.destroyed)).subscribe(n=>{const o=Z(n.target),d=T&&T.cellTarget,r=O&&O.rowTarget;let s,a;if(d!==o&&(a=h(n)||a),o){if(d===o)return;s=C(o,n),s&&this.cellEnter.emit(T=s)}const w=s&&s.rowTarget||G(n.target)&&n.target;if(r!==w&&(a=g(n)||a),w&&r!==w){const S=D(w,n,s);S&&this.rowEnter.emit(O=S)}a&&this.syncRow(a)})}destroy(){this.destroyed.next(),this.destroyed.complete(),this._removePlugin(this.grid)}syncRow(e){this.grid.rowsApi.syncRows(e.type,e.rowIndex)}}let de=(()=>{class t extends K{constructor(i,l,C){super(i,l,C)}ngOnDestroy(){this.destroy()}}return t.\u0275fac=function(i){return new(i||t)(b.Y36(j.eZ),b.Y36(b.zs3),b.Y36(j.q5))},t.\u0275dir=b.lG2({type:t,selectors:[["pbl-ngrid","targetEvents",""],["pbl-ngrid","mouseDown",""],["pbl-ngrid","mouseUp",""],["pbl-ngrid","rowClick",""],["pbl-ngrid","rowDblClick",""],["pbl-ngrid","rowEnter",""],["pbl-ngrid","rowLeave",""],["pbl-ngrid","cellClick",""],["pbl-ngrid","cellDblClick",""],["pbl-ngrid","cellEnter",""],["pbl-ngrid","cellLeave",""],["pbl-ngrid","keyDown",""],["pbl-ngrid","keyUp",""]],outputs:{mouseDown:"mouseDown",mouseUp:"mouseUp",rowClick:"rowClick",rowDblClick:"rowDblClick",rowEnter:"rowEnter",rowLeave:"rowLeave",cellClick:"cellClick",cellDblClick:"cellDblClick",cellEnter:"cellEnter",cellLeave:"cellLeave",keyDown:"keyDown",keyUp:"keyUp"},features:[b.qOj]}),t})()}}]);