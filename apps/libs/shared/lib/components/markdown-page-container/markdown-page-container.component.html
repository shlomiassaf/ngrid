<div class="example-group-container" fxLayout="row" fxLayoutAlign="space-between start" #el>
  <div fxFlex="0 0 260px" class="example-sticky-container">
    <mat-nav-list *ngIf="menu$ | async as navEntry">
      <ng-container *ngFor="let entry of navEntry.children">
        <ng-container *ngTemplateOutlet="entry.children ? containerEntry : linkEntry; context: { $implicit: entry }"></ng-container>
      </ng-container>
    </mat-nav-list>
  </div>
  <div fxFlex="*" class="example-container" docsiTocArea #tocArea="docsiTocArea"
       [scrollContainer]="el"
       staticHtmlMode
       selector="h1[id], h2[id], h3[id], h4[id]">
    <pbl-markdown-page-viewer [documentUrl]="documentUrl" (contentRendered)="contentRendered()"></pbl-markdown-page-viewer>
  </div>
  <div *ngIf="tocArea.hasLinks | async" fxFlex="0 0 18%" class="example-sticky-container example-toc-container">
    <docsi-toc [tocArea]="tocArea">
      <a *docsiTocLinkTemplate="let ctx;"
         [routerLink]="[ctx.rootUrl]"
         queryParamsHandling="preserve"
         [fragment]="ctx.link.id">{{ ctx.link.name }}</a>
    </docsi-toc>
  </div>
</div>

<ng-template #containerEntry let-entry>
  <h3 mat-subheader>{{ entry.title }}</h3>
  <ng-container *ngFor="let childEntry of entry.children">
    <ng-container *ngTemplateOutlet="childEntry.children ? containerEntry : linkEntry; context: { $implicit: childEntry }"></ng-container>
  </ng-container>
</ng-template>

<ng-template #linkEntry let-entry>
  <mat-list-item [routerLink]="getRouterLink(entry.path)">
    <a matLine>{{ entry.title }}</a>
  </mat-list-item>
</ng-template>
