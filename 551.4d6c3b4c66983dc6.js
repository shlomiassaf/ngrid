"use strict";(self.webpackChunkngrid_docs_app=self.webpackChunkngrid_docs_app||[]).push([[551],{27569:(D,I,n)=>{n.d(I,{a:()=>x});var l=n(1576),r=n(55829),p=n(88562),S=n(94650);let x=(()=>{class s{}return s.\u0275fac=function(E){return new(E||s)},s.\u0275mod=S.oAB({type:s}),s.\u0275inj=S.cJS({imports:[l.ae,r.aT,p.RF,l.ae,r.aT,p.RF]}),s})()},60551:(D,I,n)=>{n.r(I),n.d(I,{InfiniteScrollExampleModule:()=>d});var l=n(70655),r=n(36895),p=n(14625),S=n(42502),x=n(73162),s=n(43622),m=n(88562),E=n(27569),c=n(50841),t=n(94650),w=n(37048);function O(a,i){1&a&&t._UZ(0,"mat-progress-bar",2)}let g=class{constructor(i){this.datasource=i,this.loading=!1,this.columns=(0,p.I7)().table({prop:"id",width:"100px"},{prop:"name",width:"100px"},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,p.AV)().onTrigger(e=>this.allPeople?(this.loading=!1,Promise.resolve(this.allPeople.slice(0,Math.min(this.allPeople.length,this.ds.source.length+50)))):this.datasource.getPeople(100,1e3).then(o=>(this.allPeople=o,this.allPeople.slice(0,Math.min(this.allPeople.length,(this.ds.source||[]).length+50))))).create()}ngAfterViewInit(){this.ds.onRenderedDataChanged.subscribe(()=>{this.ds.length-this.ds.renderStart<20&&(this.loading||(this.loading=!0,setTimeout(()=>this.ds.refresh(),1e3*Math.random())))})}};g.\u0275fac=function(i){return new(i||g)(t.Y36(c.BQ))},g.\u0275cmp=t.Xpm({type:g,selectors:[["pbl-infinite-scroll-example"]],decls:2,vars:3,consts:[[3,"dataSource","columns"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(i,e){1&i&&(t.TgZ(0,"pbl-ngrid",0),t.YNc(1,O,1,0,"mat-progress-bar",1),t.qZA()),2&i&&(t.Q6J("dataSource",e.ds)("columns",e.columns),t.xp6(1),t.Q6J("ngIf",e.loading))},dependencies:[r.O5,w.eZ,x.pW],encapsulation:2,changeDetection:0}),g=(0,l.gn)([(0,m.en)("pbl-infinite-scroll-example",{title:"Infinite Scroll"}),(0,l.w6)("design:paramtypes",[c.BQ])],g);var B=n(56498);function M(a,i){1&a&&t._UZ(0,"mat-progress-bar",2)}let u=class{constructor(i){this.client=i,this.columns=(0,p.I7)().table({prop:"id",width:"100px",pIndex:!0},{prop:"name",width:"100px",editable:!0},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,s.R6)().withInfiniteScrollOptions({blockSize:100,initialVirtualSize:100}).withCacheOptions("sequenceBlocks").onTrigger(e=>{if(e.isInitial)return this.ds.setCacheSize(800),this.client.getPeople({pagination:{itemsPerPage:100,page:1}}).then(o=>(this.ds.updateVirtualSize(o.pagination.totalItems),e.updateTotalLength(o.pagination.totalItems),o.items));{console.log(e.fromRow,e.toRow);const o=e.fromRow%100,T=Math.floor(e.fromRow/100)+1,R=[this.client.getPeople({pagination:{itemsPerPage:100,page:T}})];return o>0&&R.push(this.client.getPeople({pagination:{itemsPerPage:100,page:T+1}})),new B.y(b=>(console.log(`NEW CALL WITH ${e.fromRow} - ${e.toRow}`),Promise.all(R).then(([P,y])=>{const C=P.items.slice(o,100);y&&C.push(...y.items.slice(0,o)),b.next(C),b.complete()}).catch(P=>b.error(P)),()=>console.log(`DONE WITH ${e.fromRow} - ${e.toRow}`)))}}).create()}};u.\u0275fac=function(i){return new(i||u)(t.Y36(c.eX))},u.\u0275cmp=t.Xpm({type:u,selectors:[["pbl-infinite-scroll-data-source-example"]],decls:3,vars:5,consts:[[3,"dataSource","columns"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(i,e){1&i&&(t.TgZ(0,"pbl-ngrid",0),t.YNc(1,M,1,0,"mat-progress-bar",1),t.ALo(2,"async"),t.qZA()),2&i&&(t.Q6J("dataSource",e.ds)("columns",e.columns),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,e.ds.adapter.virtualRowsLoading)))},dependencies:[r.O5,w.eZ,x.pW,r.Ov],encapsulation:2,changeDetection:0}),u=(0,l.gn)([(0,m.en)("pbl-infinite-scroll-data-source-example",{title:"Infinite Scroll Data Source"}),(0,l.w6)("design:paramtypes",[c.eX])],u);var Z=n(27205),A=n(18304);function v(a,i){1&a&&t._UZ(0,"mat-progress-bar",3)}function z(a,i){1&a&&t._UZ(0,"pbl-ngrid-row",4)}let h=class{constructor(i){this.client=i,this.columns=(0,p.I7)().table({prop:"id",width:"100px",pIndex:!0},{prop:"name",width:"100px",editable:!0},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,s.R6)().withInfiniteScrollOptions({blockSize:100,initialVirtualSize:100}).withCacheOptions("fragmentedBlocks",{strictPaging:!1}).onTrigger(e=>e.isInitial?(this.ds.setCacheSize(800),this.client.getPeople({pagination:{skip:0,limit:100}}).then(o=>(this.ds.updateVirtualSize(o.pagination.totalItems),e.updateTotalLength(o.pagination.totalItems),o.items))):(console.log(e.fromRow,e.toRow),this.client.getPeople({pagination:{skip:e.fromRow,limit:e.toRow-e.fromRow+1}}).then(o=>o.items))).create()}};h.\u0275fac=function(i){return new(i||h)(t.Y36(c.eX))},h.\u0275cmp=t.Xpm({type:h,selectors:[["pbl-index-based-paging-example"]],decls:4,vars:5,consts:[[3,"dataSource","columns"],["mode","indeterminate",4,"ngIf"],["in","","class","pbl-ngrid-infinite-virtual-row","row","",4,"pblNgridInfiniteVirtualRowDef"],["mode","indeterminate"],["in","","row","",1,"pbl-ngrid-infinite-virtual-row"]],template:function(i,e){1&i&&(t.TgZ(0,"pbl-ngrid",0),t.YNc(1,v,1,0,"mat-progress-bar",1),t.ALo(2,"async"),t.YNc(3,z,1,0,"pbl-ngrid-row",2),t.qZA()),2&i&&(t.Q6J("dataSource",e.ds)("columns",e.columns),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,e.ds.adapter.virtualRowsLoading)))},dependencies:[r.O5,Z.w,w.eZ,x.pW,A.a,r.Ov],encapsulation:2,changeDetection:0}),h=(0,l.gn)([(0,m.en)("pbl-index-based-paging-example",{title:"Index Based Paging"}),(0,l.w6)("design:paramtypes",[c.eX])],h);let f=class{constructor(i){this.client=i,this.columns=(0,p.I7)().table({prop:"id",width:"100px",pIndex:!0},{prop:"name",width:"100px"},{prop:"gender",width:"50px"},{prop:"birthdate",type:"date",width:"25%"}).build(),this.ds=(0,s.R6)().withInfiniteScrollOptions({blockSize:100,initialVirtualSize:100}).withCacheOptions("fragmentedBlocks",{strictPaging:!1}).setCustomTriggers("filter","sort").onTrigger(e=>{if(e.isInitial)return this.ds.setCacheSize(800),this.client.getPeople({pagination:{skip:0,limit:100}}).then(o=>(this.ds.updateVirtualSize(o.pagination.totalItems),e.updateTotalLength(o.pagination.totalItems),o.items));switch(e.eventSource){case"infiniteScroll":return this.client.getPeople({pagination:{skip:e.fromRow,limit:e.toRow-e.fromRow+1}}).then(o=>o.items);case"customTrigger":break;default:throw new Error("This should NEVER EVENT happen...")}}).create()}};f.\u0275fac=function(i){return new(i||f)(t.Y36(c.eX))},f.\u0275cmp=t.Xpm({type:f,selectors:[["pbl-custom-triggers-example"]],decls:1,vars:2,consts:[[3,"dataSource","columns"]],template:function(i,e){1&i&&t._UZ(0,"pbl-ngrid",0),2&i&&t.Q6J("dataSource",e.ds)("columns",e.columns)},dependencies:[w.eZ],encapsulation:2,changeDetection:0}),f=(0,l.gn)([(0,m.en)("pbl-custom-triggers-example",{title:"Custom Triggers"}),(0,l.w6)("design:paramtypes",[c.eX])],f);let d=class{};d.\u0275fac=function(i){return new(i||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[r.ez,E.a,x.Cv,p.dC,S.sx,s.a5]}),d=(0,l.gn)([(0,m.qB)(g,u,h,f)],d)}}]);