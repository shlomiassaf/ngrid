"use strict";(self.webpackChunkngrid_docs_app=self.webpackChunkngrid_docs_app||[]).push([[533],{80533:(G,E,n)=>{n.r(E),n.d(E,{SortHeaderExampleModule:()=>d});var b=n(70655),C=n(36895),w=n(29231),c=n(14625),I=n(8929),e=n(94650),y=n(21281),f=n(3805);const B="bsSortable";let u=(()=>{class s{constructor(t,i){this.grid=t,this.pluginCtrl=i,this.sortables=new Map,this._stateChanges=new I.xQ,this.start="asc",this.bsArrowPosition="after",this.sortChange=new e.vpe,this._direction="",this._disabled=!1,this.origin="click",this._removePlugin=i.setPlugin(B,this),this.sortChange.pipe((0,f.dW)(this)).subscribe(o=>{this.onSort(o,this.origin),this.origin="click"}),this.handleEvents()}get bsSortableDisabled(){return this._disabled}set bsSortableDisabled(t){this._disabled=(0,y.Ig)(t)}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=(0,y.Ig)(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let o=function k(s,r){let t=["asc","desc"];return"desc"==s&&t.reverse(),r||t.push(""),t}(t.start||this.start,null!=t.disableClear?t.disableClear:this.disableClear),l=o.indexOf(this.direction)+1;return l>=o.length&&(l=0),o[l]}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._removePlugin(this.grid),f.dW.kill(this)}onSort(t,i){const o=this.grid,l=o.columnApi.visibleColumns.find(a=>a.id===t.active);if("click"===i&&l&&l.sort){const a={},v="function"==typeof l.sort&&l.sort;t.direction&&(a.order=t.direction),v&&(a.sortFn=v);const P=o.ds.sort;if(l===P.column&&a.order===(P.sort||{}).order)return;o.ds.setSort(l,a)}}handleEvents(){const t=i=>{const{column:o}=i,l=i.sort?i.sort.order:void 0;if(o){if(this.active===o.id&&this.direction===(l||""))return;const a=this.sortables.get(o.id);a&&(this.origin="ds",this.active=void 0,a.start=l||"asc",a._handleClick())}else if(this.active){const a=this.sortables.get(this.active);if(a){if(!a.disableClear){let v;for(;v=this.getNextSortDirection(a);)this.direction=v}this.origin="ds",a._handleClick()}}};this.pluginCtrl.events.pipe(f.aL).subscribe(i=>{const o=this.active;this.grid.ds?.sort&&(!this.grid.ds.sort.column&&o?this.onSort({active:this.active,direction:this.direction||"asc"},this.origin):this.grid.ds.sort.column&&!o&&setTimeout(()=>t(this.grid.ds.sort)))}),this.pluginCtrl.events.subscribe(i=>{"onDataSource"===i.kind&&(f.dW.kill(this,i.prev),this.active&&this.onSort({active:this.active,direction:this.direction||"asc"},this.origin),this.grid.ds.sortChange.pipe((0,f.dW)(this,i.curr)).subscribe(o=>{t(o)}))})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(c.eZ),e.Y36(c.q5))},s.\u0275dir=e.lG2({type:s,selectors:[["pbl-ngrid","bsSortable",""]],inputs:{active:["bsSortableActive","active"],start:["bsSortableStart","start"],direction:["bsSortableDirection","direction"],bsArrowPosition:"bsArrowPosition",disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["pblBsSortable"],features:[e.TTD]}),s})();var H=n(36787);const N=["*"];let F=(()=>{class s{constructor(t,i){this.plugin=i,(0,H.T)(i.sortChange,i._stateChanges).subscribe(()=>{this._isSorted()&&this._updateArrowDirection(),t.markForCheck()})}ngOnInit(){this._updateArrowDirection(),this.plugin.register(this)}ngOnDestroy(){this.plugin.deregister(this),f.dW.kill(this)}_handleClick(){this._isDisabled()||this._toggleOnInteraction()}_updateArrowDirection(){this._direction=this._isSorted()?this.plugin.direction:this.start||this.plugin.start}_isAfter(){return"after"===this.plugin.bsArrowPosition}_isSorted(){return this.plugin.active==this.id&&("asc"===this.plugin.direction||"desc"===this.plugin.direction)}_isDisabled(){return this.plugin.bsSortableDisabled}_toggleOnInteraction(){this.plugin.sort(this)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(e.sBO),e.Y36(u))},s.\u0275cmp=e.Xpm({type:s,selectors:[["pbl-bs-sortable"]],hostBindings:function(t,i){1&t&&e.NdJ("click",function(){return i._handleClick()})},ngContentSelectors:N,decls:2,vars:10,consts:[["role","button",1,"pbl-bs-sortable"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA()),2&t&&e.ekj("pbl-bs-sortable-after",i._isAfter())("pbl-bs-sortable-sorted",i._isSorted())("pbl-bs-sortable-disabled",i._isDisabled())("asc","asc"===i._direction)("desc","desc"===i._direction)},styles:['.pbl-bs-sortable{cursor:pointer;user-select:none;-webkit-user-select:none}.pbl-bs-sortable.pbl-bs-sortable-sorted{position:relative}.pbl-bs-sortable.pbl-bs-sortable-sorted:before{content:"";display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAmxJREFUeAHtmksrRVEUx72fH8CIGQNJkpGUUmakDEiZSJRIZsRQmCkTJRmZmJgQE0kpX0D5DJKJgff7v+ru2u3O3vvc67TOvsdatdrnnP1Y///v7HvvubdbUiIhBISAEBACQkAICAEhIAQ4CXSh2DnyDfmCPEG2Iv9F9MPlM/LHyAecdyMzHYNwR3fdNK/OH9HXl1UCozD24TCvILxizEDWIEzA0FcM8woCgRrJCoS5PIwrANQSMAJX1LEI9bqpQo4JYNFFKRSvIgsxHDVnqZgIkPnNBM0rIGtYk9YOOsqgbgepRCfdbmFtqhFkVEDVPjJp0+Z6e6hRHhqBKgg6ZDCvYBygVmUoEGoh5JTRvIJwhJo1aUOoh4CLPMyvxxi7EWOMgnCGsXXI1GIXlZUYX7ucU+kbR8NW8lh3O7cue0Pk32MKndfUxQFAwxdirk3fHappAnc0oqDPzDfGTBrCfHP04dM4oTV8cxr0SVzH9FF07xD3ib6xCDE+M+aUcVygtWzzbtGX2rPBrEUYfecfQkaFzYi6HjVnGBdtL7epqAlc1+jRdAap74RrnPc4BCijttY2tRcdN0g17w7HqZrXhdJTYAuS3hd8z+vKgK3V1zWPae0mZDMykadBn1hTQBLnZNwVrJpSe/NwEeDsEwCctEOsJTsgxLvCqUl2ACftEGvJDgjxrnBqkh3ASTvEWrIDQrwrnJpkB3DSDrGW7IAQ7wqnJtkBnLRztejXXVu4+mxz/nQ9jR1w5VB86ejLTFcnnDwhzV+F6T+CHZlx6THSjn76eyyBIOPHyDakhBAQAkJACAgBISAEhIAQYCLwC8JxpAmsEGt6AAAAAElFTkSuQmCC) no-repeat;background-size:22px;width:22px;height:22px;margin-left:-22px}.pbl-bs-sortable.pbl-bs-sortable-sorted.pbl-bs-sortable-after:before{right:0;transform:translate(100%);-ms-transform:translateX(100%)}.pbl-bs-sortable.pbl-bs-sortable-sorted.desc:before{transform:rotate(180deg);-ms-transform:rotate(180deg)}.pbl-bs-sortable.pbl-bs-sortable-sorted.desc.pbl-bs-sortable-after:before{transform:translate(100%) rotate(180deg);-ms-transform:translateX(100%) rotate(180deg)}\n'],encapsulation:2,changeDetection:0}),s})();class T extends c.id{constructor(r){super(),this.cfr=r,this.name="bsSortContainer",this.kind="dataHeaderExtensions",this.projectContent=!0}shouldRender(r){return!!r.col.sort&&!!r.injector.get(u,!1)}getFactory(r){return this.cfr.resolveComponentFactory(F)}onCreated(r,t){this.deregisterId(r,t.instance.id=r.col.id),t.changeDetectorRef.markForCheck()}deregisterId(r,t){const i=r.injector.get(u),o=i.sortables.get(t);o&&i.deregister(o)}}class h{constructor(r,t){this.registry=r,r.addMulti("dataHeaderExtensions",new T(t))}}h.NGRID_PLUGIN=(0,c.Ic)({id:B},u),h.\u0275fac=function(r){return new(r||h)(e.LFG(c.B6),e.LFG(e._Vd))},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[C.ez,c.dC]});var A=n(88562),J=n(27569),Q=n(56138),S=n(50841),x=n(37048);let p=class{constructor(r){this.datasource=r,this.columns=(0,c.I7)().default({minWidth:100}).table({prop:"id",sort:!0,width:"40px"},{prop:"name",sort:!0},{prop:"gender",sort:!0,width:"50px"},{prop:"birthdate",type:"date"}).build(),this.ds=(0,c.AV)().onTrigger(()=>this.datasource.getPeople(100,500)).create()}};p.\u0275fac=function(r){return new(r||p)(e.Y36(S.BQ))},p.\u0275cmp=e.Xpm({type:p,selectors:[["pbl-bs-sort-header-example"]],decls:1,vars:2,consts:[["bsSortable","",3,"dataSource","columns"]],template:function(r,t){1&r&&e._UZ(0,"pbl-ngrid",0),2&r&&e.Q6J("dataSource",t.ds)("columns",t.columns)},dependencies:[x.eZ,u],encapsulation:2,changeDetection:0}),p=(0,b.gn)([(0,A.en)("pbl-bs-sort-header-example",{title:"Sort Header"}),(0,b.w6)("design:paramtypes",[S.BQ])],p);let g=class{constructor(r){this.datasource=r,this.columns=(0,c.I7)().default({minWidth:100}).table({prop:"id",sort:!0,width:"40px"},{prop:"name",sort:!0},{prop:"gender",sort:!0,width:"50px"},{prop:"birthdate",type:"date"}).build(),this.ds=(0,c.AV)().onTrigger(()=>this.datasource.getPeople(500)).create()}};g.\u0275fac=function(r){return new(r||g)(e.Y36(S.BQ))},g.\u0275cmp=e.Xpm({type:g,selectors:[["pbl-bs-active-column-and-direction-example"]],decls:1,vars:2,consts:[["bsSortable","","bsSortableActive","name","bsSortableDirection","desc",3,"dataSource","columns"]],template:function(r,t){1&r&&e._UZ(0,"pbl-ngrid",0),2&r&&e.Q6J("dataSource",t.ds)("columns",t.columns)},dependencies:[x.eZ,u],encapsulation:2,changeDetection:0}),g=(0,b.gn)([(0,A.en)("pbl-bs-active-column-and-direction-example",{title:"Sorting with default active column and direction"}),(0,b.w6)("design:paramtypes",[S.BQ])],g);var D=n(1576);function M(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const l=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.toggleActive(l))}),e._uU(1),e.qZA()}if(2&s){const t=r.$implicit,i=e.oxw();e.xp6(1),e.AsE("",t," [",i.getNextDirection(t),"]")}}const Z=function(){return["id","name","gender"]};let m=class{constructor(r){this.datasource=r,this.columns=(0,c.I7)().default({minWidth:100}).table({prop:"id",sort:!0,width:"40px"},{prop:"name",sort:!0},{prop:"gender",sort:!0,width:"50px"},{prop:"birthdate",type:"date"}).build(),this.ds=(0,c.AV)().onTrigger(()=>this.datasource.getPeople(500)).create(),this.ds.setSort(this.columns.table.cols[1],{order:"asc"})}clear(){this.ds.setSort()}toggleActive(r){const t=this.ds.sort;let i="asc";if(t&&t.column&&t.column.id===r)if(i=t.sort&&t.sort.order,"asc"===i)i="desc";else{if("desc"===i)return void this.clear();i="asc"}this.ds.hostGrid.setSort(r,{order:i})}getNextDirection(r){const t=this.ds.sort;return t.column&&t.column.id===r?"asc"===t.sort.order?"desc":"clear":"asc"}};m.\u0275fac=function(r){return new(r||m)(e.Y36(S.BQ))},m.\u0275cmp=e.Xpm({type:m,selectors:[["pbl-bs-programmatic-example"]],decls:6,vars:4,consts:[["bsSortable","",3,"dataSource","columns"],["fxLayout","row","fxLayoutGap","16px",2,"padding","8px"],["type","button","class","btn btn-outline-primary","fxFlex","noshrink","ngbButton","",3,"click",4,"ngFor","ngForOf"],["fxFlex","*"],["type","button","ngbButton","",1,"btn","btn-outline-danger",3,"click"],["type","button","fxFlex","noshrink","ngbButton","",1,"btn","btn-outline-primary",3,"click"]],template:function(r,t){1&r&&(e._UZ(0,"pbl-ngrid",0),e.TgZ(1,"div",1),e.YNc(2,M,2,2,"button",2),e._UZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return t.clear()}),e._uU(5,"Clear"),e.qZA()()),2&r&&(e.Q6J("dataSource",t.ds)("columns",t.columns),e.xp6(2),e.Q6J("ngForOf",e.DdM(3,Z)))},dependencies:[C.sg,D.xw,D.SQ,D.yH,x.eZ,u],encapsulation:2,changeDetection:0}),m=(0,b.gn)([(0,A.en)("pbl-bs-programmatic-example",{title:"Programmatic Sorting"}),(0,b.w6)("design:paramtypes",[S.BQ])],m);let d=class{};d.\u0275fac=function(r){return new(r||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[Q.y,C.ez,J.a,w.xZ,c.dC,h]}),d=(0,b.gn)([(0,A.qB)(p,g,m)],d)}}]);